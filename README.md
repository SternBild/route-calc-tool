# 路程計算ツール (Route Calculation Tool)

## 📍 概要

路程計算ツールは、地図上で地点を選択し、最適な経路を計算するWebアプリケーションです。出発地点と到着地点を設定し、必要に応じて中継地点を指定することで、効率的なルートを見つけることができます。

## ✨ 主な機能

- **📍 地点選択**: 地図上をクリックして出発地点、到着地点、中継地点を設定
- **🗺️ 経路計算**: 複数の経路候補から最適なルートを自動計算
- **🎯 中継地点対応**: 最大5つまでの中継地点を経由する経路を計算
- **🏔️ 道路種別設定**: 山道の使用可否を選択可能
- **💰 車賃計算**: 設定可能な単価で移動コストを自動算出
- **🖼️ PDF出力**: 計算結果を含む地図をPDFファイルとして出力
- **🔍 地図操作**: マウスホイールでの拡大縮小、ドラッグでの地図移動
- **📱 レスポンシブデザイン**: モバイルデバイスに対応

## 🚀 使用方法

### 基本的な操作手順

1. **地点選択**
   - 地図上の地点をクリックして出発地点を設定
   - 別の地点をクリックして到着地点を設定
   - 必要に応じて中継地点をクリックして追加（最大5つ）

2. **経路計算**
   - 「経路を計算」ボタンをクリック
   - 複数の経路候補が表示される（最短距離、第二候補、第三候補）
   - 任意の経路をクリックして選択・表示

3. **設定調整**
   - 「山道を使用しない」: 山道を回避する経路を計算
   - 「車賃単価30円」: km当たりの車賃を30円または25円で設定

4. **結果出力**
   - 「PDF出力」ボタンで計算結果を含む地図をPDF形式で保存

### 地図操作

- **拡大縮小**: マウスホイールを上下に回転
- **地図移動**: 地図上をドラッグ
- **表示リセット**: 「表示位置リセット」ボタンで初期表示に戻す

## 🛠️ 技術仕様

### 使用技術

- **HTML5**: セマンティックなマークアップ
- **CSS3**: Flexbox/CSS Grid対応のモダンスタイル
- **JavaScript (ES6+)**: モダンな記法によるフロントエンド実装
- **Canvas API**: 高性能な地図描画
- **外部ライブラリ**:
  - html2canvas: スクリーンショット機能
  - jsPDF: PDF生成機能

### ファイル構成

```
route-calc-tool/
├── index.html              # メインHTMLファイル
├── css/
│   └── styles.css          # スタイルシート
├── js/
│   ├── config.js           # 設定ファイル（UI設定、デバッグ設定等）
│   ├── data.js             # 地図データ（地点・道路情報）
│   ├── main.js             # メインモジュール（アプリケーション初期化）
│   ├── path-calculator.js  # 経路計算モジュール（ダイクストラ法、Yenアルゴリズム）
│   ├── map-renderer.js     # 地図描画モジュール（Canvas描画、座標変換）
│   ├── event-handlers.js   # イベント処理モジュール（マウス操作、ノード選択）
│   ├── ui-controller.js    # UI制御モジュール（結果表示、設定管理）
│   └── pdf-exporter.js     # PDF出力モジュール
└── README.md               # このファイル
```

### 主要機能の詳細

#### 経路計算アルゴリズム
- ダイクストラ法をベースとした最短経路探索
- 複数経路候補の自動生成（最大3つ）
- 中継地点を考慮した最適化計算

#### 地図描画システム
- Canvas APIによる高性能レンダリング
- ベクトルベースの地点・道路描画
- リアルタイムの拡大縮小・移動対応
- 高解像度ディスプレイ対応

#### 設定管理
- 道路種別による経路制限機能
- 車賃単価の動的変更
- UI設定のカスタマイズ対応

## 💻 動作環境

### 対応ブラウザ

- ✅ Chrome 90+
- ✅ Firefox 88+
- ✅ Safari 14+
- ✅ Edge 90+

### 推奨環境

- デスクトップ: 1024px以上の画面幅
- モバイル: iOS Safari 14+ / Android Chrome 90+
- JavaScript有効化が必須

## 🚀 起動方法

1. このリポジトリをクローンまたはダウンロード
2. Webサーバー環境で起動するか、HTMLファイルを直接ブラウザで開く
3. ローカル環境での実行も可能（file://プロトコル対応）

### 簡単起動（Python使用例）

```bash
# Python 3の場合
python -m http.server 8000

# Python 2の場合
python -m SimpleHTTPServer 8000
```

その後、ブラウザで `http://localhost:8000` にアクセス

## ⚙️ カスタマイズ

### 設定変更

`js/config.js` ファイルで以下の設定を変更可能：

- 地図表示設定（拡大率、表示サイズ等）
- 経路計算設定（最大中継地点数、候補数等）
- UI設定（フォントサイズ、色設定等）
- PDF出力設定（形式、品質等）

### 地図データ追加

`js/data.js` ファイルで地点・道路データを追加・編集可能：

- `nodes`: 地点座標データ
- `edges`: 道路接続データ
- `hiddenNodes`: 経路計算用の補助地点

## 🤝 開発・貢献

### 開発環境

- Node.js環境は不要（純粋なHTML/CSS/JS）
- テキストエディタまたはIDE
- モダンブラウザの開発者ツール

### コーディング規約

- 日本語コメントの使用
- ES6+モダン記法の採用
- セマンティックなHTML構造
- レスポンシブ対応CSS

## 📄 ライセンス

このプロジェクトのライセンス情報については、プロジェクト管理者にお問い合わせください。

## 📞 サポート・お問い合わせ

バグレポート、機能要望、質問等がございましたら、GitHub Issuesをご利用ください。

---

**路程計算ツール** - 効率的な経路計算のためのWebアプリケーション 🗺️✨
